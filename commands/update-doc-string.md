## Update Doc String

Systematically manage multilingual docstrings/comments and maintain high-quality documentation.

### Usage

```bash
# Execute with automatic language detection
"Add docstrings to classes/functions without them and update comments that don't meet standards"

# Execute with specified language
/update-doc-string --lang python
"Update Python file docstrings in PEP 257 compliance"

# Document organization for specific directory
"Add JSDoc to functions under src/components/"
```

### Options

- `--lang <en|ja>` : Documentation language (default: auto-detect from existing comments, en if none)
- `--style <style>` : Specify documentation style (language-specific defaults available)
- `--marker <true|false>` : Whether to add Claude markers (default: true)

### Basic Examples

```bash
# 1. Analyze target files (programming language auto-detected)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.dart" -o -name "*.go" -o -name "*.rs" \) | grep -v test
"Identify elements lacking docstrings (0 comment lines or less than 30 characters)"

# 2. Add documentation (automatic language detection)
"Add docstrings containing language-specific required elements to identified elements"
# â†’ Write in Japanese if existing comments contain Japanese, otherwise in English

# 3. Add documentation (explicitly specify English)
/update-doc-string --lang en
"Add docstrings with required elements to the identified elements"

# 4. Verify markers
"Confirm that all added/updated docstrings have Claude markers"
```

### Execution Procedure

#### Target Element Priority

1. ğŸ”´ **Highest Priority**: Elements without docstrings/comments (0 comment lines)
2. ğŸŸ¡ **Next Priority**: Elements not meeting standards (less than 30 characters or missing required elements)
3. ğŸŸ¢ **Verification Target**: Existing comments without Claude markers

**å¯¾è±¡è¦ç´ ï¼ˆè¨€èªå…±é€šï¼‰**:

- Class/ã‚¯ãƒ©ã‚¹å®šç¾©
- Function/é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰
- Module/ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆPython, Goï¼‰
- Enum/åˆ—æŒ™å‹
- Interface/ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆTypeScript, Goï¼‰

#### 2. è¨€èªåˆ¥è¨˜è¿°ãƒ«ãƒ¼ãƒ«

**Python (PEP 257)**:

```python
# æ—¥æœ¬èªç‰ˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
def calculate_total(items: List[Item]) -> float:
    """ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆã®åˆè¨ˆé‡‘é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ï¼ˆ30-60 æ–‡å­—ï¼‰

    å„ã‚¢ã‚¤ãƒ†ãƒ ã®ä¾¡æ ¼ã¨æ•°é‡ã‚’æ›ã‘åˆã‚ã›ã€ç¨è¾¼ã¿åˆè¨ˆã‚’è¿”ã—ã¾ã™ã€‚
    ç©ºã®ãƒªã‚¹ãƒˆã®å ´åˆã¯ 0.0 ã‚’è¿”ã—ã¾ã™ã€‚ï¼ˆ50-200 æ–‡å­—ï¼‰

    Args:
        items: è¨ˆç®—å¯¾è±¡ã®ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆ

    Returns:
        ç¨è¾¼ã¿åˆè¨ˆé‡‘é¡

    Generated by Claude ğŸ¤–
    """

# è‹±èªç‰ˆï¼ˆ--lang enï¼‰
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 chars)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 chars)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude ğŸ¤–
    """
```

**JavaScript/TypeScript (JSDoc)**:

```javascript
/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚ï¼ˆ30-60 æ–‡å­—ï¼‰
 *
 * ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æƒ…å ±ã‚’è¡¨ç¤ºã—ã€
 * ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°ç”»é¢ã¸é·ç§»ã—ã¾ã™ã€‚ï¼ˆ50-200 æ–‡å­—ï¼‰
 *
 * @param {Object} props - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
 * @param {string} props.userId - ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID
 * @param {boolean} [props.showStatus=true] - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºãƒ•ãƒ©ã‚°
 * @returns {JSX.Element} ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 *
 * @generated by Claude ğŸ¤–
 */
const UserProfile = ({ userId, showStatus = true }) => {
```

**Go**:

```go
// CalculateTotal ã¯ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆã®åˆè¨ˆé‡‘é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ï¼ˆ30-60 æ–‡å­—ï¼‰
//
// å„ã‚¢ã‚¤ãƒ†ãƒ ã®ä¾¡æ ¼ã¨æ•°é‡ã‚’æ›ã‘åˆã‚ã›ã€ç¨è¾¼ã¿åˆè¨ˆã‚’è¿”ã—ã¾ã™ã€‚
// ç©ºã®ã‚¹ãƒ©ã‚¤ã‚¹ã®å ´åˆã¯ 0.0 ã‚’è¿”ã—ã¾ã™ã€‚ï¼ˆ50-200 æ–‡å­—ï¼‰
//
// Generated by Claude ğŸ¤–
func CalculateTotal(items []Item) float64 {
```

**Rust**:

```rust
/// ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆã®åˆè¨ˆé‡‘é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ï¼ˆ30-60 æ–‡å­—ï¼‰
///
/// å„ã‚¢ã‚¤ãƒ†ãƒ ã®ä¾¡æ ¼ã¨æ•°é‡ã‚’æ›ã‘åˆã‚ã›ã€ç¨è¾¼ã¿åˆè¨ˆã‚’è¿”ã—ã¾ã™ã€‚
/// ç©ºã®ãƒ™ã‚¯ã‚¿ã®å ´åˆã¯ 0.0 ã‚’è¿”ã—ã¾ã™ã€‚ï¼ˆ50-200 æ–‡å­—ï¼‰
///
/// Generated by Claude ğŸ¤–
pub fn calculate_total(items: &[Item]) -> f64 {
```

**Dart (DartDoc)**:

```dart
/// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ Widget ã§ã™ã€‚ï¼ˆ30-60 æ–‡å­—ï¼‰
///
/// ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æƒ…å ±ã‚’ç¸¦ã«é…ç½®ã—ã€
/// ã‚¿ãƒƒãƒ—æ™‚ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°ç”»é¢ã¸é·ç§»ã—ã¾ã™ã€‚ï¼ˆ50-200 æ–‡å­—ï¼‰
///
/// Generated by Claude ğŸ¤–
class UserProfileWidget extends StatelessWidget {
```

#### 3. æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¿æŒãƒ«ãƒ¼ãƒ«

1. **æ—¢å­˜ã‚³ãƒ¡ãƒ³ãƒˆãŒåŸºæº–ã‚’æº€ãŸã™å ´åˆ**: ãã®ã¾ã¾ä¿æŒï¼ˆæ–°è¦è¿½åŠ ã—ãªã„ï¼‰
   - åŸºæº–: 30 æ–‡å­—ä»¥ä¸Šã‹ã¤å¿…é ˆè¦ç´ ï¼ˆæ¦‚è¦ãƒ»è©³ç´°ãƒ»ãƒãƒ¼ã‚«ãƒ¼ï¼‰ã‚’å«ã‚€
2. **æ—¢å­˜ã‚³ãƒ¡ãƒ³ãƒˆãŒåŸºæº–ã‚’æº€ãŸã•ãªã„å ´åˆ**: å®Œå…¨ã«ç½®ãæ›ãˆï¼ˆé‡è¤‡ã•ã›ãªã„ï¼‰
3. **æ—¢å­˜ã‚³ãƒ¡ãƒ³ãƒˆãŒãªã„å ´åˆ**: æ–°ã—ã„ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ 

**ä¿æŒã™ã¹ãé‡è¦æƒ…å ±**:

- URL ã‚„ãƒªãƒ³ã‚¯: `See also:`, `@see`, `å‚ç…§:` ãªã©
- TODO ã‚³ãƒ¡ãƒ³ãƒˆ: `TODO:`, `FIXME:`, `XXX:` å½¢å¼
- æ³¨æ„äº‹é …: `Note:`, `Warning:`, `æ³¨æ„:` ãªã©
- ä½¿ç”¨ä¾‹: `Example:`, `ä¾‹:`, `# Examples` ãªã©
- æ—¢å­˜ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»æˆ»ã‚Šå€¤èª¬æ˜

### è¨€èªåˆ¥è¨­å®š

```yaml
# è¨€èªåˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
languages:
  python:
    style: "google"  # google, numpy, sphinx
    indent: 4
    quotes: '"""'

  javascript:
    style: "jsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  typescript:
    style: "tsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  go:
    style: "godoc"
    indent: 0
    prefix: "//"

  rust:
    style: "rustdoc"
    indent: 0
    prefix: "///"

  dart:
    style: "dartdoc"
    indent: 0
    prefix: "///"
```

### å“è³ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- âœ… **æ–‡å­—æ•°**: æ¦‚è¦ 30-60 æ–‡å­—ã€è©³ç´° 50-200 æ–‡å­—ã‚’å³å®ˆ
- âœ… **å¿…é ˆè¦ç´ **: æ¦‚è¦ãƒ»è©³ç´°èª¬æ˜ãƒ» Claude ãƒãƒ¼ã‚«ãƒ¼ã® 3 è¦ç´ ã‚’å¿…ãšå«ã‚€
- âœ… **å®Œå…¨æ€§**: å½¹å‰²ãƒ»ä½¿ç”¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ»æ³¨æ„ç‚¹ã‚’è¨˜è¼‰
- âœ… **è¨€èªè¦ç´„**: å„è¨€èªã®å…¬å¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã«æº–æ‹ 
- âœ… **ä¾‹å¤–**: ã‚¨ãƒ©ãƒ¼ãƒ»ä¾‹å¤–ã®èª¬æ˜ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
- âœ… **æ­£ç¢ºæ€§**: å®Ÿè£…ã‚’åˆ†æã—ã€äº‹å®Ÿã«åŸºã¥ã„ãŸè¨˜è¿°ã®ã¿

### æ³¨æ„äº‹é …

**ğŸ”´ çµ¶å¯¾ç¦æ­¢äº‹é …**:

- âŒ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆä»¥å¤–ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´
- âŒ å®Ÿè£…è©³ç´°ã«é–¢ã™ã‚‹æ¨æ¸¬ï¼ˆäº‹å®Ÿã®ã¿è¨˜è¼‰ï¼‰
- âŒ è¨€èªè¦ç´„ã«åã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- âŒ æ—¢å­˜ã®å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å‰Šé™¤ãƒ»å¤‰æ›´
- âŒ æ—¢å­˜ã‚³ãƒ¡ãƒ³ãƒˆã¨ã®é‡è¤‡
- âŒ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ–‡å­—æ•°åŸºæº–æœªæº€ã®ã‚³ãƒ¡ãƒ³ãƒˆ

**å®Ÿè¡Œã¨æ¤œè¨¼**:

```bash
# å®Ÿè¡Œçµæœã®è¨˜éŒ²
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# æ—¢å­˜ã‚³ãƒ¡ãƒ³ãƒˆã‹ã‚‰è¨€èªã‚’è‡ªå‹•åˆ¤å®š
# æ—¥æœ¬èªæ–‡å­—ï¼ˆã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠãƒ»æ¼¢å­—ï¼‰ã‚’æ¤œå‡ºã—ãŸã‚‰ jaã€ãã‚Œä»¥å¤–ã¯ en
DOC_LANGUAGE="en"  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
if grep -r '[ã-ã‚“ã‚¡-ãƒ¶ãƒ¼ä¸€-é¾ ]' --include="*.py" --include="*.js" --include="*.ts" --include="*.dart" --include="*.go" --include="*.rs" . 2>/dev/null | head -n 1; then
  DOC_LANGUAGE="ja"
fi

# ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®è‡ªå‹•æ¤œå‡ºã¨é™çš„è§£æ
if [ -f "*.py" ]; then
  pylint --disable=all --enable=missing-docstring .
elif [ -f "*.js" ] || [ -f "*.ts" ]; then
  eslint . --rule 'jsdoc/require-jsdoc: error'
elif [ -f "*.go" ]; then
  golint ./...
elif [ -f "*.rs" ]; then
  cargo doc --no-deps
elif [ -f "*.dart" ]; then
  melos analyze
fi

if [ $? -ne 0 ]; then
  echo "ğŸ”´ ã‚¨ãƒ©ãƒ¼: é™çš„è§£æãŒå¤±æ•—ã—ã¾ã—ãŸ"
  exit 1
fi

# å®Ÿè¡Œã‚µãƒãƒªãƒ¼ã®å‡ºåŠ›
echo "ğŸ“Š å®Ÿè¡Œçµæœ:"
echo "- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨€èª: $DOC_LANGUAGE"
echo "- è¿½åŠ ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆ: $ADDED_COMMENTS ä»¶"
echo "- æ›´æ–°ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆ: $UPDATED_COMMENTS ä»¶"
echo "- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ•°: $ERRORS ä»¶"
```

### å®Ÿè¡ŒæˆåŠŸåŸºæº–

1. **å®Œäº†åˆ¤å®š**: ä»¥ä¸‹ã‚’ã™ã¹ã¦æº€ãŸã™å ´åˆã«æˆåŠŸ
   - è¨€èªå›ºæœ‰ã®é™çš„è§£æãŒ PASSED
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ•°ãŒ 0
   - è¿½åŠ ãƒ»æ›´æ–°ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆãŒã™ã¹ã¦åŸºæº–ã‚’æº€ãŸã™

2. **éƒ¨åˆ†æˆåŠŸ**: ä»¥ä¸‹ã®å ´åˆ
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ•°ãŒ 5 ä»¶æœªæº€
   - å…¨ä½“ã® 90% ä»¥ä¸ŠãŒåŸºæº–ã‚’æº€ãŸã™

3. **å¤±æ•—**: ä»¥ä¸‹ã®å ´åˆ
   - é™çš„è§£æãŒ FAILED
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ•°ãŒ 5 ä»¶ä»¥ä¸Š

### Claude ã¨ã®é€£æº

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®åˆ†æï¼ˆè¨€èªè‡ªå‹•åˆ¤å®šï¼‰
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" \)
/update-doc-string
ã€Œã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® docstring ã‚’è¨€èªåˆ¥ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«å¾“ã£ã¦æ›´æ–°ã—ã¦ã€
# â†’ æ—¢å­˜ã‚³ãƒ¡ãƒ³ãƒˆã«æ—¥æœ¬èªãŒã‚ã‚Œã° jaã€ãªã‘ã‚Œã° en ã§å®Ÿè¡Œ

# æ˜ç¤ºçš„ã«è‹±èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§å®Ÿè¡Œ
/update-doc-string --lang en
"Update docstrings following language-specific best practices"

# æ˜ç¤ºçš„ã«æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§å®Ÿè¡Œ
/update-doc-string --lang ja
ã€Œã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® docstring ã‚’è¨€èªåˆ¥ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«å¾“ã£ã¦æ›´æ–°ã—ã¦ã€

# ãƒãƒ¼ã‚«ãƒ¼ãªã—ã§å®Ÿè¡Œï¼ˆè¨€èªè‡ªå‹•åˆ¤å®šï¼‰
/update-doc-string --marker false
"Improve existing docstrings without adding Claude markers"

# è‹±èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãƒãƒ¼ã‚«ãƒ¼ãªã—
/update-doc-string --lang en --marker false
"Improve existing docstrings without adding Claude markers"
```
